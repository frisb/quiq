{"version":3,"file":"2_useragent.js","sourceRoot":"","sources":["../../../../../src/server/middleware/global/before/2_useragent.ts"],"names":[],"mappings":";;;;;;;;;AAAA,6DAAwF;AAIxF,IAAa,SAAS,GAAtB,MAAa,SAAS;IACd,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAmB;QAC1D,IAAI,SAAS,GAAY,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAMlD,IAAI,SAAS,CAAC,WAAW,EAAE,KAAK,aAAa,EAAE;YAC/C,IAAI,EAAE,CAAC;SACP;IACF,CAAC;CACD,CAAA;AAZY,SAAS;IADrB,IAAA,gCAAU,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;GAChC,SAAS,CAYrB;AAZY,8BAAS","sourcesContent":["import { Middleware, ExpressMiddlewareInterface, HttpError } from 'routing-controllers';\nimport { Request, Response, NextFunction } from 'express';\n\n@Middleware({ type: 'before', priority: 40 })\nexport class UserAgent implements ExpressMiddlewareInterface {\n\tpublic use(req: Request, res: Response, next?: NextFunction): any {\n\t\tlet userAgent = <string> req.headers['user-agent'];\n\n\t\t// if (!userAgent) {\n\t\t// \tnext(new HttpError(403, 'Forbidden'));\n\t\t// }\n\t\t// else\n\t\t\tif (userAgent.toLowerCase() !== 'libwww-perl') {\n\t\t\tnext();\n\t\t}\n\t}\n}\n"]}